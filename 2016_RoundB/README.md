SherlockAndParentheses.py: The topology ()()()(.. generates the maximum answer. Let the number of (s be A, let the number of )s be B, let P be min(A,B), we first state that the maximum number of balanced groups will not be more than P*(P+1)/2. Proof: without loss of generality, asssume A<=B. For the i th ( in the arrangement, we know there are at most A-i (s that come after it, thus the maximum number of balanced group that starts from the i th (, is (A-i)\*(A-i+1)/2. Summing up the value for each (, we know the total bound is A\*(A+1)/2, when A<B. Meanwhile, we know this bound is achievable because we can construct it with the topology ()()()(...

sherlockAndGymSecrets.cpp: we utilize the property that (i^A)%K is the same as (i%K)^A. Thus we can consider the numbers as groups, such that each group mod K with a different values. i.e. we split N into N1,N2,N3...Nk. Take N1 as an example, (all numbers in N1) % K==1. We also know exactly how many numbers are assigned to each group. For group Ni, there are N/K+(N%K >= i) numbers in it. Using fast exponential, we can calculate that for each T, how many numbers i there are such that (i%K)^A mod K==T. (Note that there can be multiple groups that contribute to T). Finally, we remove duplicate i,j pairs by iterating all different modolo results of K. 
